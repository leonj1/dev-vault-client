#!/bin/sh

# Get the current branch name
branch="$(git rev-parse --abbrev-ref HEAD)"
echo "Running tests before pushing branch: $branch"

# Run the tests using make
make test

# Capture the exit code
exit_code=$?

if [ $exit_code -ne 0 ]; then
    echo "Tests failed. Push aborted."
    exit 1
fi

exit 0
